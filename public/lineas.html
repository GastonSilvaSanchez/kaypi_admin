<!DOCTYPE html>
<html lang="es">
    <head>
	<title>KAYPI-ADMIN</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/5.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
		<link rel="stylesheet" href="css/tw.css" />
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/5.0.0/js/bootstrap.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Yanone+Kaffeesatz&display=swap" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body id="page-top">
	
        
		<div class="container register-form">
            <div class="row g-3">
                <div class="note">
                    <p>Añadir Lineas</p>
                </div>
				<div class="row g-3">
					<div class="col-auto">
						<button onclick="goBack()" class="btn btn-primary btn-lg">Atras</button>
					</div>
					<div class="col-auto">
						<form action="/" method="get">
							<input type="submit" name="submit" class="btn btn-primary btn-lg" value="Inicio">
						  </form>
					</div>
                    <div class="col-auto">
                      <form action="/logout" method="get">
                        <input type="submit" name="submit" class="btn btn-danger btn-lg" value="Cerrar Sesion">
                      </form>
                    </div>
                    <div class="col-auto">
						<form action="/listaLineas" method="get">
							<button type="submit" name="submit" class="btn btn-primary btn-lg">Ver Lista</button>
						</form>
                    </div>	
					
					
					<div class="row g-3">

					<label class="text-control" for="cantidadPuntos">Ingrese la cantidad de puntos de las ruta de ida:</label>
					<input type="number" class="form-control" name="cantidadPunto1" id="cantidadPunto1" min="2" max="500">
					<div class="form-text">El numero debe ser como minimo 2.</div>
					<br>
					<label class="text-control" for="cantidadPuntos">Ingrese la cantidad de puntos de las ruta de vuelta:</label>
					<input type="number" class="form-control" name="cantidadPunto2" id="cantidadPunto2" min="2" max="500">
					<div class="form-text">El numero debe ser como minimo 2.</div>
					<button onclick="GenerarListadeLineas()" id="btnLoadLines" class="btn btn-primary btn-lg">Cargar los campos para añadir cordenadas para añadir puntos </button>
				    </div>
					
				</div>	
			<!-- Form-->
			<form action="/guardarLinea" method="post" id="formPrincipal" class="form-content" visibility="hidden"">
				<label class="text-control" for="validationDefault01">Nombre de Linea:</label>
				  <div class="form-group">
					  <input type="text" name="nombre" class="form-control" id="validationDefault01" placeholder="Ingresar Linea + numero o letra de la linea *" value="" required>
					  <div class="form-text">Por ejemplo: Linea Z</div>
					</div>
				<label class="text-control" for="validationDefault02">Categoria:</label>
					<div class="form-group">
					  <input type="text" name="categoria" list="cat" class="form-control" id="validationDefault02" placeholder="Ingresar Categoria Aqui" value="" required>
					  <datalist id="cat">
						<option value="Micro">
						<option value="Minibus">
						<option value="Taxitrufi">
					  </datalist>
					</div>					
				<label class="text-control" for="validationDefault04">Zona:</label>
					<div class="form-group">
					  <input type="text" name="zona" class="form-control" id="validationDefault04" placeholder="Ingresar Zona Aqui" value="" required>
					</div>
					<label class="text-control" for="validationDefault05">Pasajes:</label>
					<div class="form-group">
					  <input type="text" name="pasaje" class="form-control" id="validationDefault05" placeholder="Ingresar Pasaje + Mayores Aqui *" value="" required>
					  <div class="form-text">Por ejemplo: "1.90 Bs. Mayores"</div>
					</div>
					<div class="form-group">
						<input type="text" name="pasaje" class="form-control" id="validationDefault05" placeholder="Ingresar Pasaje + Discapacidad Aqui *" value="" required>
						<div class="form-text">Por ejemplo: "1.50 Bs. Discapacidad"</div>
					</div>
					<div class="form-group">
						<input type="text" name="pasaje" class="form-control" id="validationDefault05" placeholder="Ingresar Pasaje + Universitario Aqui *" value="" required>
						<div class="form-text">Por ejemplo: "0.80 Bs. Universitario"</div>
					</div>
					<div class="form-group">
						<input type="text" name="pasaje" class="form-control" id="validationDefault05" placeholder="Ingresar Pasaje + Estudiantes Aqui *" value="" required>
						<div class="form-text">Por ejemplo: "0.50 Bs. Estudiantes"</div>
					</div>
					<label class="text-control" for="validationDefault06">Calles:</label>
					<div class="form-group">
					  <input type="text" name="calle" class="form-control" id="validationDefault06" placeholder="Ingresar Calle 1 Aqui" value="" required>
					</div>
					<div class="form-group">
						<input type="text" name="calle" class="form-control" id="validationDefault06" placeholder="Ingresar Calle 2(Opcional) Aqui *" value="">
					</div>
					<div class="form-group">
						<input type="text" name="calle" class="form-control" id="validationDefault06" placeholder="Ingresar Calle 3(Opcional) Aqui *" value="">
					</div>
					<div class="form-group">
						<input type="text" name="calle" class="form-control" id="validationDefault06" placeholder="Ingresar Calle 4(Opcional) Aqui *" value="">
					</div>
					<label class="text-control" for="validationDefault07">Telefonos:</label>
					<div class="form-group">
					  <input type="text" name="telefono" class="form-control" id="tel1" placeholder="Ingresar Telefono(Opcional) Aqui *" value="" required>
					</div>
					<div class="form-group">
						<input type="text" name="telefono" class="form-control" id="tel2" placeholder="Ingresar Telefono(Opcional) Aqui *" value="" >
					</div>
					<label class="text-control" for="validationDefault08">Horario:</label>
					<div class="form-group">
					  <input type="text" name="horario" class="form-control" id="validationDefault08" placeholder="Ingresar Horario Aqui *" value="" required>
					  <div class="form-text">Por ejemplo: "Diurno: 08:00:00 - 20:00:00"</div>
					  
					</div>
					<br>
					<hr>
					<br>
					<h3>Rutas:</h3>
					<br>
					<div class="row g-3 align-items-center">
						<div class="col-auto">
							<a id="boton link" target="_blank"  class="form-control btn btn-primary" href='https://www.google.com.bo/maps'"> 
								<h6>Entrar a Google Maps</h6>
						   </a>
						   </div>
						   <div class="col-auto">
							<span id="passwordHelpInline" class="form-text">
								Usa este link para copiar las cordenadas de la lista
							</span>
						  </div>
						  <div class="col-auto"></div>
					</div>
				   <br>
				   <h3>Ruta Ida</h3>
				   <br>
					<div class="form-group">
						<div class="input-group mb-3">
							<span class="input-group-text" id="sentido">Sentido</span>
							<input type="text" name="ruta1" class="form-control" aria-describedby="sentido" id="validationDefault09" placeholder="Ingresar el sentido ruta de ida aqui" required>
							
						</div>
						<div class="form-text">Añade un sentido de ruta como: NORTE-SUR.</div>
						<br>
						<input type="hidden" name="color1" value="rojo">
						<div id="cantIda">
					
						</div>
						<div id="cantPuntosIda">
					
						</div>
					</div>
					
					<br>
					<hr>
					<br>
					<h3>Ruta Vuelta</h3>
					<br>
					<div class="form-group">
						<div class="input-group mb-3">
							<span class="input-group-text" id="sentido">Sentido</span>
							<input type="text" name="ruta2" aria-describedby="sentido" class="form-control" id="validationDefault10" placeholder="Ingresar el sentido ruta de vuelta aqui" required>
							
						</div>
						<div class="form-text">Añade un sentido de ruta contrario a la ruta de ida como: SUR-NORTE.</div>
						<br>
						<input type="hidden" name="color2" value="azul">
						<div id="cantVuelta">
					
						</div>
						<div id="cantPuntosVuelta">
					
						</div>
					</div>
					
					
					<br />
				<input class="btnSubmit" type="submit" value="Registrar" >
			</form>
        </div>
    </body>
	
	<script>
	// Example starter JavaScript for disabling form submissions if there are invalid fields
	window.onload = function(e) {
		var form  = document.getElementById("formPrincipal");
        var allElements = form.elements;
        for (var i = 0, l = allElements.length; i < l; ++i) {
         // allElements[i].readOnly = true;
         allElements[i].disabled=true;
        }
    }
	
	function GenerarListadeLineas() {
		var btn = document.getElementById('btnLoadLines');
		inputIda = document.getElementById('cantidadPunto1');
		inputVuelta = document.getElementById('cantidadPunto2');
        var cantIda = document.getElementById('cantidadPunto1').value;
        var cantVuelta = document.getElementById('cantidadPunto2').value;
		inputIda.disabled=true;
		inputVuelta.disabled=true;
		btn.disabled=true;
		if(cantIda < 2 || cantVuelta < 2){
			alert("Los numeros para la cantidad de puntos deben ser mayores a 2");
			inputIda.disabled=false;
		    inputVuelta.disabled=false;
		    btn.disabled=false;
		}
		else{
			HabilitarForm();
		document.querySelector('#cantIda').innerHTML += `
		<input type="hidden" name="cantIda" value="${cantIda}">
		
		`;
		document.querySelector('#cantVuelta').innerHTML += `
		<input type="hidden" name="cantVuelta" value="${cantVuelta}">
		
		`;
		for (let index = 1; index <= cantIda; index++) {
			document.querySelector('#cantPuntosIda').innerHTML += `
			<div class="row g-3 align-items-center">
						<div class="col-auto">
							<div class="input-group mb-3">
                                <span class="input-group-text" id="lat">Latitud ${index}</span>
                                <input type="text" class="form-control" name="lat1" id="lat1" placeholder="Ingrese la latitud ${index}" aria-label="Latitud" aria-describedby="lat" required>
                            </div>
				
						</div>
						<div class="col-auto">
							<div class="input-group mb-3">
                                <span class="input-group-text" id="lng">Longitud ${index}</span>
                                <input type="text" class="form-control" id="lng1" name="lng1" placeholder="Ingrese la longitud ${index}" aria-label="Longitud" aria-describedby="lng" required>
                            </div>
						</div>
			</div>
		`			
		}
		for (let index = 1; index <= cantVuelta; index++) {
			document.querySelector('#cantPuntosVuelta').innerHTML += `
			<div class="row g-3 align-items-center">
						<div class="col-auto">
							<div class="input-group mb-3">
                                <span class="input-group-text" id="lat">Latitud ${index}</span>
                                <input type="text" class="form-control" name="lat2" id="lat2" placeholder="Ingrese la latitud ${index}" aria-label="Latitud" aria-describedby="lat" required>
                            </div>
				
						</div>
						<div class="col-auto">
							<div class="input-group mb-3">
                                <span class="input-group-text" id="lng">Longitud ${index}</span>
                                <input type="text" class="form-control" id="lng2" name="lng2" placeholder="Ingrese la longitud ${index}" aria-label="Longitud" aria-describedby="lng" required>
                            </div>
						</div>
			</div>
		`			
		}
		}
		
		
	}
	function HabilitarForm() {
		var form  = document.getElementById("formPrincipal");
        var allElements = form.elements;
        for (var i = 0, l = allElements.length; i < l; ++i) {
         // allElements[i].readOnly = true;
         allElements[i].disabled=false;
        }
    }
	function goBack() {
       window.history.back();
     }
	var form = document.getElementById("formPrincipal");
    form.onsubmit = function() {
		var telefono = document.getElementById("tel1").value;
	var telefonoOpcional = document.getElementById("tel2").value;
	var z = document.getElementById("lat1").value;
	var x = document.getElementById("lat2").value;
	var c = document.getElementById("lng1").value;
	var v = document.getElementById("lng2").value;
	var status = true;
		if(telefonoOpcional.value=="" || telefonoOpcional.value==null){
			if(typeof telefono == 'number' && telefono.length<7 ||telefono.length>14){
			   alert("El telefono esta fuera del rango de caracteres establecido 7-14");
			   return false;
		    }
			if(isNaN(telefono)){
				alert(01);
				alert("El campo de telefono debe contener solo caractes numericos");
				return false;

			}
		}
		else{
			if(telefono.length<7 ||telefono.length>14){
			   alert("El telefono esta fuera del rango de caracteres establecido 7-14");
			   return false;
		    }
			if(isNaN(telefono)){
				alert("El campo de telefono debe contener solo caractes numericos");
				return false;

			}
			if(telefonoOpcional.length<7 ||telefonoOpcional.length>14){
			   alert("El telefono esta fuera del rango de caracteres establecido 7-14");
			   return false;
		    }
			if(isNaN(telefonoOpcional)){
				alert("El campo de telefono debe contener solo caractes numericos");
				return false;
			}
		}
		
		if(isNaN(Math.abs(z)))
        {
        alert("Por favor solo ingrese caracteres numericos en los campos de latitud");
		return false;
        }
		if(isNaN(Math.abs(x)))
        {
        alert("Por favor solo ingrese caracteres numericos en los campos de latitud");
		return false;
        }
		if(isNaN(Math.abs(c)))
        {
        alert("Por favor solo ingrese caracteres numericos en los campos de longitud");
		return false;
        }
		if(isNaN(Math.abs(v)))
        {
        alert("Por favor solo ingrese caracteres numericos en los campos de longitud");
		return false;
        }
	return true;
    }   
	</script>
</html>
